<h1>Welcome to Score Ticker!</h1>

<input type="text" id="playerName" placeholder="Enter your name" />
<button onclick="createPlayer()">Create New Controller</button>

<script>
async function createPlayer() {
  const name = document.getElementById('playerName').value.trim();
  if (!name) {
    alert('Please enter your name!');
    return;
  }

  const response = await fetch('/create-player', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name }),
  });

  const { playerId } = await response.json();
  
  // Save playerID locally
  localStorage.setItem('playerID', playerId);

  window.location.href = `/controller/${playerId}`;
}
</script>